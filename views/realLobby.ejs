<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Poker Lobby</title>
  
  
</head>
<body>
  <!-- Header?? -->
  <header style="display: flex; justify-content: space-between; align-items: center; padding: 10px;">
    <div id="logo">LOGO</div> <!-- Our logo would go here-->
    <div style="flex-grow: 1; text-align: left;">
      <input type="text" placeholder="Search Games" />
    </div>
    <div id="profile-menu" style="position: relative;">
      <button id="profile-button">ðŸ§‘</button>
      <div id="dropdown" class="dropdown">
        <div><a href="/profile">Check Profile</a></div> <!-- Assuming we have a profile route-->
        <div><a href="/logout">Logout</a></div> <!-- Assuming we have a logout route-->
      </div>
    </div>
  </header>

  <style>

.dropdown {
    display: none;
    position: absolute;
    top: 30px;
    right: 0;
    background: white;
    border: 1px solid black;
    padding: 5px;
    z-index: 10;
  }

  .dropdown a {
    display: block;
    padding: 5px 10px;
    text-decoration: none;
    color: black;
  }

  .dropdown a:hover {
    background-color: #f0f0f0;
  }

  .show {
    display: block;
  }

</style>

  <script>
    const button = document.getElementById('profile-button');
    const dropdown = document.getElementById('dropdown');

    button.addEventListener('click', () => {
      dropdown.classList.toggle('show');
    });

    document.addEventListener('click', (e) => {
      if (!document.getElementById('profile-menu').contains(e.target)) {
        dropdown.classList.remove('show');
      }
    });
  </script>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();

    socket.on("chat-message:global", (msg) => {
      const container = document.getElementById("chat-messages");

      const div = document.createElement("div");
      div.innerHTML = `
        <img src="${msg.gravatar}" width="24" height="24" style="border-radius: 50%; vertical-align: middle;">
        <strong>${msg.sender}:</strong> ${msg.message}
        <span style="font-size: 0.8em; color: gray;">(${new Date(msg.timestamp).toLocaleTimeString()})</span>
      `;
      container.appendChild(div);
      container.scrollTop = container.scrollHeight;
    });
  </script>
  
  <main style="display: flex; padding: 20px; gap: 20px;">
    <!-- Game List -->
    <section style="flex: 2;">
      <h2>Games</h2>
      <div style="height: 300px; overflow-y: auto; border: 1px solid black; padding: 10px;">
        <!-- Games go here-->
      </div>
    </section>

    <!-- Actions, need to link them to the correct routes -->
    <section style="flex: 1; display: flex; flex-direction: column; gap: 10px;">
      <button>Add Funds</button>
      <button>Cash Out</button>
      <button>Join</button>
      <button>Create</button>
    </section>

    <!-- Friends + Chat -->
    <section style="flex: 2; display: flex; flex-direction: column; height: 100%;">
      <div>
        <h3>Friends List</h3>
        <!-- Friends list goes here -->
        <div style="height: 100px; border: 1px solid black;">Friends go here</div>
      </div>



      <!-- Chat goes here -->
      <div style="margin-top: 200px; display: flex; flex-direction: column;">
        <h3>Global Chat</h3>
        <div style="height: 450px; overflow-y: auto; border: 1px solid black; padding: 5px; background: #f9f9f9;">
        <form method="POST" action="/chat/global" style="display: flex; align-items: flex-end; gap: 5px; margin-top: 5px; height: 100%;">
          <input type="text" name="message"  placeholder="Message" style="flex: 1;" required />
          <button type="submit">Send</button>
        </form>
        </div>
      </div>
    </section>
  </main>
</body>
</html>